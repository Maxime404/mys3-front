[{"D:\\Utilisateurs\\Maxime\\Efrei\\mys3-front\\src\\App.js":"1","D:\\Utilisateurs\\Maxime\\Efrei\\mys3-front\\src\\reportWebVitals.js":"2","D:\\Utilisateurs\\Maxime\\Efrei\\mys3-front\\src\\components\\Bucket.js":"3","D:\\Utilisateurs\\Maxime\\Efrei\\mys3-front\\src\\components\\Home.js":"4","D:\\Utilisateurs\\Maxime\\Efrei\\mys3-front\\src\\components\\SignUp.js":"5","D:\\Utilisateurs\\Maxime\\Efrei\\mys3-front\\src\\components\\Profil.js":"6"},{"size":1060,"mtime":1610053168000,"results":"7","hashOfConfig":"8"},{"size":362,"mtime":1607589784000,"results":"9","hashOfConfig":"8"},{"size":4571,"mtime":1610053492000,"results":"10","hashOfConfig":"8"},{"size":5452,"mtime":1610055372000,"results":"11","hashOfConfig":"8"},{"size":5854,"mtime":1610053168000,"results":"12","hashOfConfig":"8"},{"size":6352,"mtime":1610053168000,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"10td3kk",{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"21","messages":"22","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23","usedDeprecatedRules":"24"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"27","messages":"28","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\Utilisateurs\\Maxime\\Efrei\\mys3-front\\src\\App.js",["29"],"D:\\Utilisateurs\\Maxime\\Efrei\\mys3-front\\src\\reportWebVitals.js",[],["30","31"],"D:\\Utilisateurs\\Maxime\\Efrei\\mys3-front\\src\\components\\Bucket.js",[],"D:\\Utilisateurs\\Maxime\\Efrei\\mys3-front\\src\\components\\Home.js",["32"],"import React, { Component } from 'react'\r\nimport { Redirect, Link } from 'react-router-dom'\r\nimport { FaFolder, FaRegWindowClose } from 'react-icons/fa';\r\nimport Header from './Header';\r\n\r\nexport default class Home extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            redirectionToSignIn: false,\r\n            user: {},\r\n            token: '',\r\n            buckets: [],\r\n            bucketName: '',\r\n            isCreatedBucket: false\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.getDataStorage()\r\n        this.getBuckets()\r\n    }\r\n\r\n    async getDataStorage() {\r\n        const data = await JSON.parse(localStorage.getItem('data'))\r\n        if (!data || !data.user || !data.meta.token) {\r\n            console.log('Some storage item is missing')\r\n            this.setState({ redirectionToSignIn: true })\r\n        } else {\r\n            this.setState({ user: data.user, token: data.meta.token })\r\n        }\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({ [event.target.name]: event.target.value, error: '', isCreatedBucket: false })\r\n    }\r\n\r\n    getBuckets = async () => {\r\n        const { token } = this.state\r\n        return fetch(`${process.env.REACT_APP_API_URL}api/users/${this.state.user.uuid}/buckets`, {\r\n            method: 'GET',\r\n            headers:\r\n                new Headers({\r\n                    'Accept': 'application/json',\r\n                    'Authorization': 'Bearer ' + token,\r\n                    'Content-Type': 'application/json'\r\n                })\r\n        }).then((response) => response.json())\r\n            .then((json) => {\r\n                if (json.data && json.data.bucket) {\r\n                    //console.log(json.data);\r\n                    this.setState({\r\n                        buckets: json.data.bucket\r\n                    })\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.error(error);\r\n            })\r\n    }\r\n\r\n    createBucket = async () => {\r\n        const { user, bucketName, token } = this.state\r\n        const req = await fetch(`${process.env.REACT_APP_API_URL}api/users/${user.uuid}/buckets`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            },\r\n            body: JSON.stringify({ name: bucketName.trim() })\r\n        })\r\n        try {\r\n            const json = await req.json()\r\n            if (json.err) {\r\n                this.setState({ error: json.err.description })\r\n            } else {\r\n                this.getBuckets();\r\n                this.setState({ isCreatedBucket: true })\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    deleteBucket = async () => {\r\n        console.log('delete bucket')\r\n    }\r\n\r\n    render() {\r\n        if (this.state.redirectionToSignIn) {\r\n            return <Redirect to='/sign-in' />\r\n        } else {\r\n            const { error, isCreatedBucket, bucketName, buckets } = this.state\r\n            return (\r\n                <div className=\"container auth-wrapper\">\r\n                    <div className=\"row\">\r\n                        <div className=\"home-inner col-sm-12 col-md-12 col-lg-10 px-4\">\r\n                            <Header />\r\n                            <div className='form-group'>\r\n                                <label>\r\n                                    Nom du Bucket :\r\n                                        <input type=\"text\" name=\"bucketName\" className=\"form-control\" placeholder=\"Ex: covid-19 ❤\" value={this.state.bucketName} onChange={this.handleChange} />\r\n                                </label>\r\n                                <button type=\"submit\" className=\"btn btn-primary ml-2\" onClick={this.createBucket}>Créer</button>\r\n                            </div>\r\n                            {isCreatedBucket && <div className=\"block-message block-notify mb-3\">Nouveau bucket créé</div>}\r\n                            {error && <div className=\"block-message block-error mb-3\">{error}</div>}\r\n\r\n                            <div className=\"container\">\r\n                                <div className=\"row\">\r\n                                    {buckets.length > 1 && buckets.map((bucket) => {\r\n                                        return (\r\n                                            <div className=\"col-4\">\r\n                                                <div class=\"d-inline\" onClick={this.deleteBucket}>\r\n                                                    <FaRegWindowClose size=\"1em\" className=\"mr-2 text-danger\" />\r\n                                                </div>\r\n                                                <Link className=\"d-inline text-decoration-none\" to={'bucket/' + bucket.id} >\r\n                                                    <FaFolder size=\"2em\" />\r\n                                                    <span className=\"ml-2\">{bucket.name}</span>\r\n                                                </Link>\r\n                                            </div>\r\n                                        )\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}",["33","34"],"D:\\Utilisateurs\\Maxime\\Efrei\\mys3-front\\src\\components\\SignUp.js",[],"D:\\Utilisateurs\\Maxime\\Efrei\\mys3-front\\src\\components\\Profil.js",["35"],{"ruleId":"36","severity":1,"message":"37","line":3,"column":45,"nodeType":"38","messageId":"39","endLine":3,"endColumn":49},{"ruleId":"40","replacedBy":"41"},{"ruleId":"42","replacedBy":"43"},{"ruleId":"36","severity":1,"message":"44","line":94,"column":45,"nodeType":"38","messageId":"39","endLine":94,"endColumn":55},{"ruleId":"40","replacedBy":"45"},{"ruleId":"42","replacedBy":"46"},{"ruleId":"36","severity":1,"message":"37","line":2,"column":20,"nodeType":"38","messageId":"39","endLine":2,"endColumn":24},"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","no-native-reassign",["47"],"no-negated-in-lhs",["48"],"'bucketName' is assigned a value but never used.",["47"],["48"],"no-global-assign","no-unsafe-negation"]